(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(7),o=n.n(i),c=n(12),s=n(156),l=n(31),u=n(34),d=n(16),p=n(11),h=n(29),f=(n(86),n(10));function g(e,t){if(!e.startsWith("__")&&"x"!==e&&"y"!==e&&"vx"!==e&&"vy"!==e&&"fx"!==e&&"fy"!==e&&"index"!==e&&"source"!==e&&"target"!==e)return t}var m=function e(t){var n=this;Object(d.a)(this,e),this._nodeMap={},this._linkMap={},this._nextNodeId=null,this._nextLinkId=null,this.getImmutableCopy=function(){var e=JSON.stringify({_nodeMap:n._nodeMap,_linkMap:n._linkMap,_nextNodeId:n._nextNodeId,_nextLinkId:n._nextLinkId},g,2);return JSON.parse(e)},this.addNode=function(e){var t={__id:n._nextNodeId,name:e,__links:{},x:0,y:0,vx:0,vy:0};return n._nodeMap[n._nextNodeId]=t,n._nextNodeId++,t},this.deleteNode=function(e){if(e=n.findNode(e),Object.keys(e.__links).length>0)throw new Error("Cannot delete node, when node has links");delete n._nodeMap[e.__id]},this.addLink=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"CHILD";if(e===t)throw new Error("Cannot create link with same sourceId and targetId");var a=n._nodeMap[e].__links;for(var i in a){var o=a[i];if(o.sourceId===e&&o.targetId===t)throw new Error("Cannot create duplicate links")}var c={__id:n._nextLinkId,type:r,sourceId:e,targetId:t,source:e,target:t};return n._linkMap[n._nextLinkId]=c,n._nodeMap[e].__links[n._nextLinkId]=c,n._nodeMap[t].__links[n._nextLinkId]=c,n._nextLinkId++,c},this.deleteLink=function(e){e=n.findLink(e),delete n._linkMap[e.__id],delete n._nodeMap[e.sourceId].__links[e.__id],delete n._nodeMap[e.targetId].__links[e.__id]},this.findNode=function(e){var t;if(!(t="number"===typeof e?n._nodeMap[e]:e))throw new Error("Cannot find node ".concat(e));return t},this.findLink=function(e){var t;if(!(t="number"===typeof e?n._linkMap[e]:e))throw new Error("Cannot find link ".concat(e));return t},this.getNodeArray=function(){return n._nodeMap?Object.values(n._nodeMap):[]},this.getLinkArray=function(){return n._linkMap?Object.values(n._linkMap):[]},function(e){for(var t in e._nodeMap)e._nodeMap[t].__id=Number(t);for(var n in e._linkMap)e._linkMap[n].__id=Number(n)}(t),function(e){for(var t in e._nodeMap)e._nodeMap[t].__links={};for(var n in e._linkMap){var r=e._linkMap[n];e._nodeMap[r.sourceId].__links[n]=r,e._nodeMap[r.targetId].__links[n]=r,r.source=r.sourceId,r.target=r.targetId}}(t),this._nodeMap=t._nodeMap,this._linkMap=t._linkMap,this._nextNodeId=t._nextNodeId,this._nextLinkId=t._nextLinkId},v=n(28),b=n.n(v),k=n(40);function _(e,t,n,r){return new Promise(function(a,i){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(200===o.status||201===o.status?a(o.responseText):i(new Error("response failed, status: ".concat(o.status))))},o.open(e,t,!0),n&&Object.keys(n).forEach(function(e){o.setRequestHeader(e,n[e])}),r?o.send(JSON.stringify(r)):o.send()})}var j="https://api.github.com/",y="graphState.json",w=function(){function e(t,n){if(Object(d.a)(this,e),!t)throw new Error("Token not passed!");this._auth={Authorization:"token ".concat(t)},this._gistId=n,this._files=null,this._description="",this._public=null}return Object(p.a)(e,[{key:"create",value:function(){var e=Object(k.a)(b.a.mark(function e(t,n,r,a){var i,o,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.wrapNewFileData(t,n,r,a),e.next=3,_("POST","".concat(j,"gists"),this._auth,i);case 3:o=e.sent,e.prev=4,c=JSON.parse(o),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(4),console.error("Retrieved json from gist failed to parse: ".concat(e.t0.message)),e.t0;case 12:if(c){e.next=14;break}throw new Error("Data from response not available");case 14:return this._gistId=c.id,e.abrupt("return",c);case 16:case"end":return e.stop()}},e,this,[[4,8]])}));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(k.a)(b.a.mark(function e(t,n,r,a){var i,o,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.wrapNewFileData(t,n,r,a),e.next=3,_("PATCH","".concat(j,"gists/").concat(this._gistId),this._auth,i);case 3:o=e.sent,e.prev=4,c=JSON.parse(o),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(4),console.error("Retrieved json from gist failed to parse: ".concat(e.t0.message)),e.t0;case 12:if(c.id===this._gistId){e.next=14;break}throw new Error("Gist id from respons does not match the current Gist id");case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}},e,this,[[4,8]])}));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(k.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("GET","".concat(j,"gists/").concat(this._gistId),this._auth,null);case 2:t=e.sent,e.prev=3,n=JSON.parse(t),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(3),console.error("Retrieved json from gist failed to parse"),e.t0;case 11:if(n){e.next=13;break}throw new Error("Data from response not available");case 13:return this._description=n.description,this._files=n.files,this._public=n.public,e.abrupt("return",n);case 17:case"end":return e.stop()}},e,this,[[3,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"wrapNewFileData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._public,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._description;return this._files||(this._files={}),this._files[e]={filename:e,content:t},{description:r,files:this._files,public:n}}}]),e}(),O=-300,S=130;function N(e){!function(e){e.graph||(e.graph={_nodeMap:e._nodeMap,_linkMap:e._linkMap,_nextNodeId:e._nextNodeId,_nextLinkId:e._nextLinkId},delete e._nodeMap,delete e._linkMap,delete e._nextNodeId,delete e._nextLinkId);e.meta||(e.meta={forceStrength:O,forceDistance:S,version:l.a})}(e)}var E,x,D,I,C,L,M,P,F,A=n(47),T=n.n(A);function G(e,t,n){if(e.constructor!==Object)return!1;for(var r=Object.keys(t),a=0;a<r.length;a++){var i=r[a];if(!e.hasOwnProperty(i))return!1;if("object"===t[i]){if(e[i].constructor!==Object)return!1}else if(typeof e[i]!==t[i])return!1}if(n)for(var o=Object.keys(n),c=0;c<o.length;c++){var s=o[c];if(e.hasOwnProperty(s)&&typeof e[s]!==n[s])return!1}return!0}var z,H,J,W={_nodeMap:{1:{name:"initial node"},2:{name:"linked node"}},_linkMap:{1:{type:"CHILD",sourceId:1,targetId:2}},_nextNodeId:3,_nextLinkId:2},U=(E=function(){function e(){var t=this;Object(d.a)(this,e),this.githubToken=null,Object(u.a)(this,"gists",x,this),this.graphData=null,Object(u.a)(this,"isLoaded",D,this),this.projectGist=null,this._initializeGraph=function(e){var n,r,a,i=e.files[y].content,o=e.description;try{N(r=JSON.parse(i)),G((a=r).graph,{_nodeMap:"object",_linkMap:"object",_nextNodeId:"number",_nextLinkId:"number"})&&G(a.meta,{forceStrength:"number",forceDistance:"number",version:"string"})||(n='Project format "'.concat(o||"Untitled",'" has invalid data format'))}catch(c){n='Project "'.concat(o||"Untitled",'" failed to parse / migrate / validate')}n?T.a.alert({type:"error",text:n}):(t.graphData=new m(r.graph),t.forceStrength=r.meta.forceStrength,t.forceDistance=r.meta.forceDistance,t.isLoaded=!0)},this._prepareStateForSave=function(e){return{graph:e||t.graphData.getImmutableCopy(),meta:{forceStrength:t.forceStrength,forceDistance:t.forceDistance,version:l.a}}},Object(u.a)(this,"_activeNode",I,this),Object(u.a)(this,"targetLinkChoiceInProgress",C,this),Object(u.a)(this,"changeStamp",L,this),Object(u.a)(this,"savedChangeStamp",M,this),Object(u.a)(this,"forceStrength",P,this),Object(u.a)(this,"forceDistance",F,this)}return Object(p.a)(e,[{key:"loadProject",value:function(e){this.projectGist=new w(this.githubToken,e),this.projectGist.read().then(this._initializeGraph)}},{key:"newProject",value:function(){this.projectGist=new w(this.githubToken);var e=this._prepareStateForSave(W),t=JSON.stringify(e,null,2);this.projectGist.create("graphState.json",t,!1,"new graph").then(this._initializeGraph)}},{key:"saveProject",value:function(){var e=this,t=this._prepareStateForSave(),n=JSON.stringify(t,null,2);this.projectGist.update(y,n).then(function(t){e.savedChangeStamp=e.changeStamp})}},{key:"getAfterErrorSnapshot",value:function(){return{graphData:this.graphData.getImmutableCopy(),forceStrength:this.forceStrength,forceDistance:this.forceDistance,targetLinkChoiceInProgress:this.targetLinkChoiceInProgress,changeStamp:this.changeStamp,savedChangeStamp:this.savedChangeStamp,gistId:this.projectGist._gistId}}},{key:"activeNode",get:function(){return this._activeNode},set:function(e){this._activeNode&&(this.graphData.findNode(this._activeNode).__focused=!1),e&&(this.graphData.findNode(e).__focused=!0),this._activeNode=e}}]),e}(),x=Object(h.a)(E.prototype,"gists",[f.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=Object(h.a)(E.prototype,"isLoaded",[f.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(h.a)(E.prototype,"loadProject",[f.d],Object.getOwnPropertyDescriptor(E.prototype,"loadProject"),E.prototype),Object(h.a)(E.prototype,"newProject",[f.d],Object.getOwnPropertyDescriptor(E.prototype,"newProject"),E.prototype),Object(h.a)(E.prototype,"saveProject",[f.d],Object.getOwnPropertyDescriptor(E.prototype,"saveProject"),E.prototype),I=Object(h.a)(E.prototype,"_activeNode",[f.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=Object(h.a)(E.prototype,"targetLinkChoiceInProgress",[f.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=Object(h.a)(E.prototype,"changeStamp",[f.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=Object(h.a)(E.prototype,"savedChangeStamp",[f.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=Object(h.a)(E.prototype,"forceStrength",[f.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O}}),F=Object(h.a)(E.prototype,"forceDistance",[f.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S}}),E),B=(n(89),n(25)),R=n(23),q=n(26),V=(n(90),n(36)),X=n(22);n(91);J=function(e){var t=window.innerWidth,n=window.innerHeight,r=function(e){e.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).attr("cx",function(e){return e.x=Math.max(30,Math.min(t-30,e.x))}).attr("cy",function(e){return e.y=Math.max(30,Math.min(n-30,e.y))})},a=function(e){e.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y})},i=function(e){e.selectAll(".node").call(r),e.selectAll(".link").call(a)},c=function(t){X.b.active||e.force.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y},s=function(e){e.fx=X.b.x,e.fy=X.b.y},l=function(t){X.b.active||e.force.alphaTarget(0),t.fx=null,t.fy=null};return e.width=t,e.height=n,e.enterNode=function(e){e.select("circle").attr("r",25).style("fill","tomato").style("stroke","bisque").style("stroke-width","3px"),e.select("text").style("fill","honeydew").style("font-weight","600").style("text-transform","uppercase").style("text-anchor","middle").style("alignment-baseline","middle").style("font-size","10px").style("font-family","cursive")},e.updateNode=r,e.enterLink=function(e){e.attr("stroke-width",3).attr("stroke","bisque")},e.updateLink=a,e.updateGraph=i,e.initForce=function(t,n,r){var a=r.strength,i=r.distance;e.force=X.g(t).force("charge",X.f().strength(a)).force("link",X.e(n).id(function(e){return e.__id}).distance(i)).force("center",X.c().x(e.width/2).y(e.height/2)).force("collide",X.d([5]).iterations([5]))},e.dragStarted=c,e.dragging=s,e.dragEnded=l,e.initDrag=function(){return X.i("g.node").call(X.a().on("start",c).on("drag",s).on("end",l))},e.initTick=function(t){t.d3Graph=X.h(o.a.findDOMNode(t)),e.force.on("tick",function(){t.d3Graph.call(i)})},e}(J||{});var K,Y,$,Q=Object(c.b)("projectStore")(z=Object(c.c)(z=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(B.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(a)))).reInitForce=function(e,t){J.initForce(e.getNodeArray(),e.getLinkArray(),t),J.initTick(Object(V.a)(Object(V.a)(n))),J.initDrag()},n.reInitForceDebounced=function(e,t){var n;return function(){var r=this,a=arguments;n&&clearTimeout(n),n=setTimeout(function(){e.apply(r,a),n=null},t)}}(n.reInitForce,100),n}return Object(q.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.projectStore,t=e.graphData,n=e.forceStrength,r=e.forceDistance;this.reInitForce(t,{strength:n,distance:r})}},{key:"componentDidUpdate",value:function(e){var t=this.props.projectStore.graphData;e.changeStamp===this.props.changeStamp&&e.forceStrength===this.props.forceStrength&&e.forceDistance===this.props.forceDistance||this.reInitForceDebounced(t,{strength:this.props.forceStrength,distance:this.props.forceDistance})}},{key:"render",value:function(){var e=this.props.projectStore,t=e.graphData,n=(e.activeNode,t.getNodeArray().map(function(e){return a.a.createElement(ee,{key:e.__id,name:e.name,data:e,focused:e.__focused})})),r=t.getLinkArray().map(function(e){return a.a.createElement(Z,{key:e.__id,data:e})});return a.a.createElement("div",{className:"graph_container"},a.a.createElement("svg",{className:"graph",width:J.width,height:J.height},a.a.createElement("defs",null,a.a.createElement("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"26",refY:"5",markerWidth:"5",markerHeight:"5",orient:"auto-start-reverse",markerUnits:"strokeWidth"},a.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"}))),a.a.createElement("g",null,r),a.a.createElement("g",null,n)))}}]),t}(r.Component))||z)||z,Z=function(e){function t(){return Object(d.a)(this,t),Object(B.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.d3Link=X.h(o.a.findDOMNode(this)).datum(this.props.data).call(J.enterLink)}},{key:"componentDidUpdate",value:function(){this.d3Link.datum(this.props.data).call(J.updateLink)}},{key:"render",value:function(){return a.a.createElement("line",{className:"link",markerEnd:"url('#arrow')"})}}]),t}(r.Component),ee=Object(c.b)("projectStore")(H=Object(c.c)(H=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(B.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(a)))).processFocus=function(e,t){e.select("circle").classed("focused",t)},n.handleClick=function(e){var t=n.props.projectStore;if(t.targetLinkChoiceInProgress){var r=t.activeNode,a=Number(e.currentTarget.dataset.nodeId);try{t.graphData.addLink(r,a,"CHILD")}catch(e){return void console.warn(e.message)}t.targetLinkChoiceInProgress=!1,t.changeStamp++}else t.activeNode=Number(e.currentTarget.dataset.nodeId)},n}return Object(q.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.d3Node=X.h(o.a.findDOMNode(this)).datum(this.props.data).call(J.enterNode).call(this.processFocus,this.props.focused)}},{key:"componentDidUpdate",value:function(){this.d3Node.datum(this.props.data).call(J.updateNode).call(this.processFocus,this.props.focused)}},{key:"render",value:function(){var e=this.props.data.__id;return a.a.createElement("g",{className:"node",onClick:this.handleClick,"data-node-id":e},a.a.createElement("circle",null),a.a.createElement("text",null,this.props.data.name))}}]),t}(r.Component))||H)||H,te=Q,ne=(n(92),n(152)),re=n(157),ae=n(74),ie=n.n(ae),oe=n(149),ce=n(150),se=n(159),le=n(151),ue=n(76),de=n(148),pe=n(160),he=Object(pe.a)(de.a)({margin:"2px"}),fe=function(e){var t=e.size,n=void 0===t?"small":t,r=e.variant,i=void 0===r?"contained":r,o=e.children,c=Object(ue.a)(e,["size","variant","children"]);return a.a.createElement(he,Object.assign({size:n,variant:i},c),o)},ge=Object(c.b)("projectStore")(K=Object(c.c)(K=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(B.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(i)))).state={activeNode:null,linksHided:!1},n.renderActiveNodeInfo=function(e){var t=e.description?e.description:"";return a.a.createElement(a.a.Fragment,null,a.a.createElement(re.a,{label:"Node Name",fullWidth:!0,multiline:!0,variant:"outlined",margin:"normal",value:e.name,onChange:function(t){return n.handleChangeNodeName(t,e)}}),a.a.createElement("br",null),a.a.createElement(re.a,{label:"Description",fullWidth:!0,multiline:!0,variant:"outlined",margin:"normal",value:t,onChange:function(t){return n.handleChangeDescription(t,e)}}),a.a.createElement("br",null),"Node ID: ",e.__id,a.a.createElement("br",null))},n.handleChangeNodeName=function(e,t){t.name=e.target.value,n.props.projectStore.changeStamp++},n.handleChangeDescription=function(e,t){t.description=e.target.value,n.props.projectStore.changeStamp++},n.renderLinks=function(e){var t=n.props.projectStore.graphData;if(n.state.linksHided)return a.a.createElement(fe,{onClick:n.showLinks},"Show links ...");var r=[],i=function(i){var o=e.__links[i],c=t.findNode(o.sourceId),s=t.findNode(o.targetId);r.push(a.a.createElement(ce.a,{key:"item-".concat(i),button:!0},a.a.createElement(se.a,null,a.a.createElement("b",null,"source: "),c.__id,": ",c.name,", ",a.a.createElement("b",null,"target: "),s.__id,": ",s.name),a.a.createElement(le.a,null,a.a.createElement(ne.a,{onClick:function(){return n.handleDeleteLink(o)}},a.a.createElement(ie.a,{fontSize:"small"})))))};for(var o in e.__links)i(o);return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,"Links:"),a.a.createElement(oe.a,{className:"links-list",subheader:a.a.createElement("li",null),dense:!0},r))},n.showLinks=function(){n.setState({linksHided:!1})},n.renderDeleteNodeButton=function(e){return Object.keys(e.__links).length>0?null:a.a.createElement(fe,{onClick:function(){return n.handleDeleteNode(e)}},"Delete this node")},n.renderNewLinkComponent=function(){return n.props.projectStore.targetLinkChoiceInProgress?a.a.createElement("div",null,"Click on target node to create new link ... ",a.a.createElement(fe,{onClick:n.handleAbortNewLinkCreation,variant:"outlined",color:"secondary"},"cancel")):a.a.createElement("div",null,a.a.createElement(fe,{onClick:n.handleNewLinkTargetSelection},"add new link..."),a.a.createElement("br",null))},n.handleAbortNewLinkCreation=function(){n.props.projectStore.targetLinkChoiceInProgress=!1},n.renderNewChildButton=function(e){return a.a.createElement("div",{key:"newChild"},a.a.createElement(fe,{onClick:function(){return n.handleNewChildCreation(e.__id)}},"add new child..."),a.a.createElement("br",null))},n.handleDeleteNode=function(e){var t=n.props.projectStore;t.activeNode=null,t.graphData.deleteNode(e),t.changeStamp++},n.handleDeleteLink=function(e){var t=n.props.projectStore;t.graphData.deleteLink(e),t.changeStamp++},n.createNewNode=function(){var e=n.props.projectStore,t=e.graphData.addNode("new node");e.activeNode=t.__id,e.changeStamp++},n.handleNewChildCreation=function(e){var t=n.props.projectStore,r=t.graphData,a=r.addNode("new child node");r.addLink(a.__id,e,"CHILD"),t.activeNode=a.__id,t.changeStamp++},n.handleNewLinkTargetSelection=function(){n.props.projectStore.targetLinkChoiceInProgress=!0},n}return Object(q.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this.props.projectStore,n=t.activeNode;t.changeStamp;if(n){var r=t.graphData.findNode(n);e=a.a.createElement(a.a.Fragment,null,this.renderActiveNodeInfo(r),a.a.createElement("br",null),this.renderLinks(r),this.renderDeleteNodeButton(r),this.renderNewLinkComponent(r),this.renderNewChildButton(r))}else e=a.a.createElement(a.a.Fragment,null,"Click on node to edit",a.a.createElement("br",null),"or",a.a.createElement("br",null),a.a.createElement(fe,{onClick:this.createNewNode},"create new node"));return a.a.createElement("div",{key:"graphEditPanel",className:"graphEditPanel"},e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.projectStore,r=n.activeNode;if(r===t.activeNode)return t;var a=null,i=!1;return r&&(a=n.graphData.findNode(r),i=Object.keys(a.__links).length>5),{activeNode:r,linksHided:i}}}]),t}(r.Component))||K)||K,me=(n(107),Object(c.b)("projectStore")(Y=Object(c.c)(Y=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(B.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(a)))).handleLeavePage=function(e){var t=n.props.projectStore;if(t.changeStamp!==t.savedChangeStamp){var r="Data not saved, sure you want to leave the application?";return e.returnValue=r,r}},n.componentDidMount=function(){window.addEventListener("beforeunload",n.handleLeavePage)},n.componentWillUnmount=function(){window.removeEventListener("beforeunload",n.handleLeavePage)},n.handleSave=function(){n.props.projectStore.saveProject()},n}return Object(q.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this.props.projectStore;return e=t.changeStamp>t.savedChangeStamp?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"redPoint"},"Has unsaved changes"),a.a.createElement(fe,{onClick:this.handleSave},"Save")):a.a.createElement("span",{className:"greenPoint"},"Graph saved"),a.a.createElement("div",{className:"saveInterface"},e)}}]),t}(r.Component))||Y)||Y),ve=(n(108),"GITHUB_TOKEN");function be(e){var t=localStorage.getItem(ve);if(t)return e(null,t);!function(e,t){T.a.input({text:"Specify github ".concat(e)},function(e){return t(null,e)},function(){var n="Need Specify github ".concat(e," to continue =(");return T.a.error({text:n}),t(new Error(n))})}("token with gist access",function(t,n){return t?e(t):(localStorage.setItem(ve,n),e(null,n))})}function ke(){return(ke=Object(k.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t);case 2:return n=e.sent,e.abrupt("return",n.filter(function(e){return!!e.files[y]}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _e(e){return je.apply(this,arguments)}function je(){return(je=Object(k.a)(b.a.mark(function e(t){var n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("GET","".concat(j,"gists"),{Authorization:"token ".concat(t)},null);case 2:n=e.sent,e.prev=3,r=JSON.parse(n),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(3),console.error("Retrieved json from gist storage failed to parse"),e.t0;case 11:if(r){e.next=13;break}throw new Error("Data from response not available");case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,null,[[3,7]])}))).apply(this,arguments)}var ye,we,Oe=Object(c.b)("projectStore")($=Object(c.c)($=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(B.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(a)))).handleSelect=function(e){n.props.projectStore.loadProject(e)},n.handleNewGist=function(){n.props.projectStore.newProject()},n}return Object(q.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.projectStore;be(function(t,n){if(t)throw t;e.githubToken=n,function(e){return ke.apply(this,arguments)}(n).then(function(t){e.gists=t})})}},{key:"render",value:function(){var e=this,t=this.props.projectStore.gists;if(!t)return"gists loading...";var n=t.map(function(t){return a.a.createElement("span",{key:t.id,className:"gistDescription yellow",onClick:function(){return e.handleSelect(t.id)}},t.description)});return n.push(a.a.createElement("span",{key:"new",className:"gistDescription blue",onClick:this.handleNewGist},"create new")),a.a.createElement("div",{className:"gistSelection"},a.a.createElement("span",null,"Choose gist with graph:"),n)}}]),t}(r.Component))||$)||$,Se=n(162),Ne=(n(109),Object(c.b)("projectStore")(ye=Object(c.c)(ye=function(e){function t(){return Object(d.a)(this,t),Object(B.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.projectStore;return a.a.createElement("div",{className:"settingsPanel"},"Strength:",a.a.createElement(Se.a,{defaultValue:e.forceStrength,value:e.forceStrength,min:-550,max:-50,onChange:function(t,n){e.forceStrength=n,e.changeStamp++}}),"Distance:",a.a.createElement(Se.a,{defaultValue:e.forceDistance,value:e.forceDistance,min:50,max:210,onChange:function(t,n){e.forceDistance=n,e.changeStamp++}}))}}]),t}(r.Component))||ye)||ye);function Ee(e){return a.a.createElement("div",{className:"app-version"},"Version: ",e.version)}var xe=Object(c.b)("projectStore")(we=Object(c.c)(we=function(e){function t(){return Object(d.a)(this,t),Object(B.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this.props.projectStore,n=t.graphData,r=t.changeStamp,i=t.forceStrength,o=t.forceDistance;t.isLoaded;return e=n?a.a.createElement(a.a.Fragment,null,a.a.createElement(te,{changeStamp:r,forceStrength:i,forceDistance:o}),a.a.createElement(ge,null),a.a.createElement(me,null),a.a.createElement(Ne,null),a.a.createElement(Ee,{version:l.a})):a.a.createElement(a.a.Fragment,null,a.a.createElement(Oe,null),a.a.createElement(Ee,{version:l.a})),a.a.createElement("div",{className:"App"},e)}}]),t}(r.Component))||we)||we;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(s.a)({beforeSend:function(e){return e.message=JSON.stringify(De.getAfterErrorSnapshot()),e},release:l.a,dsn:"https://504d6ec417994bf7b7f559ffcdc5afab@sentry.io/1527022"});var De=new U,Ie={projectStore:De};o.a.render(a.a.createElement(c.a,Ie,a.a.createElement(xe,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},31:function(e){e.exports={a:"0.5.1"}},81:function(e,t,n){e.exports=n(111)},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.0c0a67c9.chunk.js.map