{"version":3,"sources":["Graph.js","request.js","gist/constants.js","Gist.js","config.js","migrator.js","validator.js","ProjectStore.js","GraphView.js","debounce.js","Button.js","GraphEditPanel.js","SaveInterface.js","gistSelection.js","SettingsPanel.js","App.tsx","serviceWorker.ts","index.tsx"],"names":["stripTempData","key","value","startsWith","Graph","savedGraphState","_this","this","Object","classCallCheck","_nodeMap","_linkMap","_nextNodeId","_nextLinkId","getImmutableCopy","str","JSON","stringify","parse","addNode","nodeName","newNode","__id","name","__links","x","y","vx","vy","deleteNode","node","findNode","keys","length","Error","addLink","sourceId","targetId","type","arguments","undefined","oldLinks","oldLinkKey","oldLink","newLink","source","target","deleteLink","link","findLink","result","concat","getNodeArray","values","getLinkArray","nodeId","Number","linkId","refillMapIds","refillLinks","request","method","path","headers","data","Promise","resolve","reject","xhr","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","forEach","header","setRequestHeader","send","API_URL","GRAPH_STATE_FILENAME","Gist","token","gistId","_auth","Authorization","_gistId","_files","_description","_public","fileName","fileData","isPublic","description","dto","wrapNewFileData","response","responseObj","console","error","_context","t0","message","id","_context2","files","public","filename","content","GRAPH_FORCE_STRENGTH_DEFAULT","GRAPH_FORCE_DISTANCE_DEFAULT","applyMigrations","graph","meta","forceStrength","forceDistance","version","replaceRootSections","validateDataObject","requiredProps","optionalProps","constructor","requiredKeys","i","property","hasOwnProperty","optionalKeys","FORCE","INITIAL_GRAPH_DATA","1","2","ProjectStore","_class","githubToken","initializerDefineProperty","_descriptor","graphData","_descriptor2","projectGist","_initializeGraph","gistInfo","errorMsg","savedState","savedGraphStateJson","projectName","err","notie","alert","text","isLoaded","_prepareStateForSave","optionalGraphData","appVersion","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","createClass","read","then","stateForSave","stateJson","create","_this2","resultJson","update","savedChangeStamp","changeStamp","targetLinkChoiceInProgress","get","_activeNode","set","v","__focused","applyDecoratedDescriptor","prototype","observable","configurable","enumerable","writable","initializer","action","getOwnPropertyDescriptor","nsp","width","window","innerWidth","height","innerHeight","updateNode","selection","attr","d","Math","max","min","updateLink","updateGraph","selectAll","call","dragStarted","d3","active","force","alphaTarget","restart","fx","fy","dragging","dragEnded","enterNode","select","style","enterLink","initForce","nodes","links","forceOptions","strength","distance","iterations","initDrag","on","initTick","that","d3Graph","ReactDOM","findDOMNode","GraphView","inject","observer","reInitForce","assertThisInitialized","reInitForceDebounced","fn","delay","timerId","context","args","clearTimeout","setTimeout","apply","debounce","_this$props$projectSt","props","projectStore","prevProps","_this$props$projectSt2","activeNode","map","react_default","a","createElement","GraphView_Node","focused","GraphView_Link","className","viewBox","refX","refY","markerWidth","markerHeight","orient","markerUnits","Component","Link","d3Link","datum","markerEnd","Node","processFocus","d3NodeSelection","isFocused","classed","handleClick","e","sourceNodeId","targetNodeId","currentTarget","dataset","warn","d3Node","onClick","data-node-id","StyledButton","styled","Button","margin","CustomButton","_ref","_ref$size","size","_ref$variant","variant","children","rest","objectWithoutProperties","assign","GraphEditPanel","state","linksHided","renderActiveNodeInfo","descriptionContent","Fragment","TextField","label","fullWidth","multiline","onChange","handleChangeNodeName","handleChangeDescription","targetNode","renderLinks","src_Button","showLinks","items","_loop","sourceNode","push","ListItem","button","ListItemText","ListItemSecondaryAction","IconButton","handleDeleteLink","Delete_default","fontSize","List","subheader","dense","setState","renderDeleteNodeButton","handleDeleteNode","renderNewLinkComponent","handleAbortNewLinkCreation","color","handleNewLinkTargetSelection","renderNewChildButton","handleNewChildCreation","createNewNode","currentNodeId","prevState","SaveInterface","handleLeavePage","event","warningText","returnValue","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","handleSave","saveProject","LOCAL_STORAGE_KEY","requestToken","cb","localStorage","getItem","fieldName","input","inputResult","errMsg","notieInput","setItem","_callee","userGists","regenerator_default","wrap","prev","next","getAllUserGists","sent","abrupt","filter","gist","stop","_callee2","GistSelection","handleSelect","loadProject","handleNewGist","newProject","getSuitableGists","gists","gistElems","SettingsPanel","Slider","defaultValue","c","AppVesion","App","_projectStore","src_GraphView_0","GraphEditPanel_GraphEditPanel","src_SaveInterface_0","SettingsPanel_SettingsPanel","gistSelection_GistSelection","Boolean","location","hostname","match","initSentry","beforeSend","getAfterErrorSnapshot","release","dsn","stores","render","index_module","src_App_0","document","querySelector","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0c0a67c9.chunk.js","sourcesContent":["/**\n * \"_data\" - is a private data\n * \"__data\" - is a temporary data\n */\n\nfunction refillMapIds(savedGraphState) {\n  for (let nodeId in savedGraphState._nodeMap) {\n    let node = savedGraphState._nodeMap[nodeId];\n    node.__id = Number(nodeId);\n  }\n  for (let linkId in savedGraphState._linkMap) {\n    let link = savedGraphState._linkMap[linkId];\n    link.__id = Number(linkId);\n  }\n}\n\nfunction refillLinks(savedGraphState) {\n  for (let nodeId in savedGraphState._nodeMap) {\n    let node = savedGraphState._nodeMap[nodeId];\n    node.__links = {};\n  }\n  for (let linkId in savedGraphState._linkMap) {\n    let link = savedGraphState._linkMap[linkId];\n\n    let sourceNode = savedGraphState._nodeMap[link.sourceId];\n    sourceNode.__links[linkId] = link;\n    let targetNode = savedGraphState._nodeMap[link.targetId];\n    targetNode.__links[linkId] = link;\n\n    // for d3 force links // TODO: maybe extern this code?\n    link.source = link.sourceId;\n    link.target = link.targetId;\n  }\n}\n\nfunction stripTempData(key, value) {\n  // remove temp data\n  if (key.startsWith('__')) return void 0;\n\n  // remove d3 temp data\n  if (key === 'x') return void 0;\n  if (key === 'y') return void 0;\n  if (key === 'vx') return void 0;\n  if (key === 'vy') return void 0;\n  if (key === 'fx') return void 0;\n  if (key === 'fy') return void 0;\n  if (key === 'index') return void 0;\n  if (key === 'source') return void 0;\n  if (key === 'target') return void 0;\n\n  return value;\n}\n\nexport default class Graph {\n  _nodeMap = {};\n  _linkMap = {};\n  _nextNodeId = null;\n  _nextLinkId = null;\n\n  // TODO: add case, when savedGraphState === undefined\n  constructor(savedGraphState) {\n    refillMapIds(savedGraphState);\n    refillLinks(savedGraphState);\n\n    this._nodeMap = savedGraphState._nodeMap;\n    this._linkMap = savedGraphState._linkMap;\n    this._nextNodeId = savedGraphState._nextNodeId;\n    this._nextLinkId = savedGraphState._nextLinkId;\n  }\n\n  getImmutableCopy = () => {\n    const str = JSON.stringify(\n      {\n        _nodeMap: this._nodeMap,\n        _linkMap: this._linkMap,\n        _nextNodeId: this._nextNodeId,\n        _nextLinkId: this._nextLinkId\n      },\n      stripTempData,\n      2\n    );\n    return JSON.parse(str);\n  };\n\n  addNode = nodeName => {\n    let newNode = {\n      __id: this._nextNodeId,\n      name: nodeName,\n      __links: {},\n      // i cannot find where each node datum get vx, vy, x, y from d3js\n      // TODO: u can try to find\n      // so i create it myself here:\n      x: 0,\n      y: 0,\n      vx: 0,\n      vy:0\n    };\n    this._nodeMap[this._nextNodeId] = newNode;\n    this._nextNodeId++;\n    return newNode;\n  };\n\n  deleteNode = node => {\n    node = this.findNode(node);\n    // TODO: delete all links or warn about current links ?\n    // current behavior: warn about current links\n    if (Object.keys(node.__links).length > 0) {\n      throw new Error('Cannot delete node, when node has links');\n    }\n\n    delete this._nodeMap[node.__id];\n  };\n\n  addLink = (sourceId, targetId, type = 'CHILD') => {\n    if (sourceId === targetId)\n      throw new Error('Cannot create link with same sourceId and targetId');\n\n    let oldLinks = this._nodeMap[sourceId].__links;\n    for (let oldLinkKey in oldLinks) {\n      const oldLink = oldLinks[oldLinkKey];\n      if (oldLink.sourceId === sourceId && oldLink.targetId === targetId) {\n        throw new Error('Cannot create duplicate links');\n      }\n    }\n\n    let newLink = {\n      __id: this._nextLinkId,\n      type,\n      sourceId,\n      targetId,\n      // for d3 force links // TODO: maybe extern this code?\n      source: sourceId,\n      target: targetId\n    };\n    this._linkMap[this._nextLinkId] = newLink;\n    this._nodeMap[sourceId].__links[this._nextLinkId] = newLink;\n    this._nodeMap[targetId].__links[this._nextLinkId] = newLink;\n    this._nextLinkId++;\n    return newLink;\n  };\n\n  deleteLink = link => {\n    link = this.findLink(link);\n    delete this._linkMap[link.__id];\n\n    let sourceNode = this._nodeMap[link.sourceId];\n    delete sourceNode.__links[link.__id];\n    let targetNode = this._nodeMap[link.targetId];\n    delete targetNode.__links[link.__id];\n  };\n\n  /**\n   * node - nodeId or node\n   * result - node\n   */\n  findNode = node => {\n    let result;\n    if (typeof node === 'number') {\n      result = this._nodeMap[node];\n    } else {\n      result = node;\n    }\n\n    if (!result) throw new Error(`Cannot find node ${node}`);\n\n    return result;\n  };\n\n  /**\n   * link - linkId or link\n   * result - link\n   */\n  findLink = link => {\n    let result;\n    if (typeof link === 'number') {\n      result = this._linkMap[link];\n    } else {\n      result = link;\n    }\n\n    if (!result) throw new Error(`Cannot find link ${link}`);\n\n    return result;\n  };\n\n  getNodeArray = () => {\n    if (!this._nodeMap) return [];\n\n    return Object.values(this._nodeMap);\n  };\n\n  getLinkArray = () => {\n    if (!this._linkMap) return [];\n\n    return Object.values(this._linkMap);\n  };\n}\n","export default function request(method, path, headers, data) {\n  return new Promise((resolve, reject) => {\n    let xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200 || xhr.status === 201) {\n          resolve(xhr.responseText);\n        } else {\n          reject(new Error(`response failed, status: ${xhr.status}`));\n        }\n      }\n    };\n    xhr.open(method, path, true);\n    if (headers) {\n      Object.keys(headers).forEach(header => {\n        xhr.setRequestHeader(header, headers[header]);\n      });\n    }\n    if (!data) {\n      xhr.send();\n    } else {\n      xhr.send(JSON.stringify(data));\n    }\n  });\n}\n","export const API_URL = 'https://api.github.com/';\nexport const GRAPH_STATE_FILENAME = 'graphState.json';\n","import request from './request';\nimport { API_URL } from './gist/constants';\n\nexport default class Gist {\n  constructor(token, gistId) {\n    if (!token) throw new Error('Token not passed!');\n    this._auth = { Authorization: `token ${token}` };\n    this._gistId = gistId;\n\n    this._files = null;\n    this._description = '';\n    this._public = null;\n  }\n\n  async create(fileName, fileData, isPublic, description) {\n    const dto = this.wrapNewFileData(fileName, fileData, isPublic, description);\n    let response = await request('POST', `${API_URL}gists`, this._auth, dto);\n    let responseObj;\n    try {\n      responseObj = JSON.parse(response);\n    } catch (e) {\n      console.error(`Retrieved json from gist failed to parse: ${e.message}`);\n      throw e;\n    }\n\n    if (!responseObj) throw new Error('Data from response not available');\n\n    this._gistId = responseObj.id;\n    return responseObj;\n  }\n\n  async update(fileName, fileData, isPublic, description) {\n    const dto = this.wrapNewFileData(fileName, fileData, isPublic, description);\n    let response = await request(\n      'PATCH',\n      `${API_URL}gists/${this._gistId}`,\n      this._auth,\n      dto\n    );\n    let responseObj;\n    try {\n      responseObj = JSON.parse(response);\n    } catch (e) {\n      console.error(`Retrieved json from gist failed to parse: ${e.message}`);\n      throw e;\n    }\n\n    if (responseObj.id !== this._gistId)\n      throw new Error(\n        'Gist id from respons does not match the current Gist id'\n      );\n\n    return responseObj;\n  }\n\n  async read() {\n    let response = await request(\n      'GET',\n      `${API_URL}gists/${this._gistId}`,\n      this._auth,\n      null\n    );\n    let responseObj;\n    try {\n      responseObj = JSON.parse(response);\n    } catch (e) {\n      console.error(`Retrieved json from gist failed to parse`);\n      throw e;\n    }\n\n    if (!responseObj) throw new Error('Data from response not available');\n\n    this._description = responseObj.description;\n    this._files = responseObj.files;\n    this._public = responseObj.public;\n\n    return responseObj;\n  }\n\n  wrapNewFileData(\n    fileName,\n    fileData,\n    isPublic = this._public,\n    description = this._description\n  ) {\n    if (!this._files) this._files = {};\n\n    this._files[fileName] = { filename: fileName, content: fileData };\n    return {\n      description,\n      files: this._files,\n      public: isPublic\n    };\n  }\n}\n","export const GRAPH_FORCE_STRENGTH_DEFAULT = -300;\nexport const GRAPH_FORCE_STRENGTH_MIN = -550;\nexport const GRAPH_FORCE_STRENGTH_MAX = -50;\n\nexport const GRAPH_FORCE_DISTANCE_DEFAULT = 130;\nexport const GRAPH_FORCE_DISTANCE_MIN = 50;\nexport const GRAPH_FORCE_DISTANCE_MAX = 210;\n","import { version } from '../package.json';\nimport {\n  GRAPH_FORCE_STRENGTH_DEFAULT,\n  GRAPH_FORCE_DISTANCE_DEFAULT\n} from './config';\n\nexport default function applyMigrations(savedGraphState) {\n  replaceRootSections(savedGraphState);\n}\n\nfunction replaceRootSections(savedGraphState) {\n  if (!savedGraphState.graph) {\n    savedGraphState.graph = {\n      _nodeMap: savedGraphState._nodeMap,\n      _linkMap: savedGraphState._linkMap,\n      _nextNodeId: savedGraphState._nextNodeId,\n      _nextLinkId: savedGraphState._nextLinkId\n    };\n    delete savedGraphState._nodeMap;\n    delete savedGraphState._linkMap;\n    delete savedGraphState._nextNodeId;\n    delete savedGraphState._nextLinkId;\n  }\n  if (!savedGraphState.meta) {\n    savedGraphState.meta = {\n      forceStrength: GRAPH_FORCE_STRENGTH_DEFAULT,\n      forceDistance: GRAPH_FORCE_DISTANCE_DEFAULT,\n      version\n    };\n  }\n}\n","export default function validateSavedState(savedState) {\n  if (\n    !validateDataObject(savedState.graph, {\n      _nodeMap: 'object',\n      _linkMap: 'object',\n      _nextNodeId: 'number',\n      _nextLinkId: 'number'\n    })\n  )\n    return false;\n\n  if (\n    !validateDataObject(savedState.meta, {\n      forceStrength: 'number',\n      forceDistance: 'number',\n      version: 'string'\n    })\n  )\n    return false;\n\n  return true;\n}\n\nfunction validateDataObject(target, requiredProps, optionalProps) {\n  if (target.constructor !== Object) return false;\n\n  const requiredKeys = Object.keys(requiredProps);\n  for (let i = 0; i < requiredKeys.length; i++) {\n    const property = requiredKeys[i];\n    if (!target.hasOwnProperty(property)) return false;\n\n    if (requiredProps[property] === 'object') {\n      if (target[property].constructor !== Object) return false;\n    } else {\n      if (typeof target[property] !== requiredProps[property]) return false;\n    }\n  }\n\n  if (optionalProps) {\n    const optionalKeys = Object.keys(optionalProps);\n    for (let i = 0; i < optionalKeys.length; i++) {\n      const property = optionalKeys[i];\n      if (target.hasOwnProperty(property)) {\n        if (typeof target[property] !== optionalProps[property]) return false;\n      }\n    }\n  }\n\n  return true;\n}\n","import { observable, action } from 'mobx';\nimport { version as appVersion } from '../package.json';\nimport Graph from './Graph';\nimport Gist from './Gist';\nimport { GRAPH_STATE_FILENAME } from './gist/constants';\nimport {\n  GRAPH_FORCE_DISTANCE_DEFAULT,\n  GRAPH_FORCE_STRENGTH_DEFAULT\n} from './config';\nimport applyMigrations from './migrator';\nimport notie from 'notie';\nimport validateSavedState from './validator';\n\nconst INITIAL_GRAPH_DATA = {\n  _nodeMap: {\n    1: { name: 'initial node' },\n    2: { name: 'linked node' }\n  },\n  _linkMap: {\n    1: { type: 'CHILD', sourceId: 1, targetId: 2 }\n  },\n  _nextNodeId: 3,\n  _nextLinkId: 2\n};\n\nexport class ProjectStore {\n  githubToken = null;\n  @observable gists = null;\n\n  graphData = null;\n  @observable isLoaded = false;\n\n  projectGist = null;\n  @action loadProject(gistId) {\n    this.projectGist = new Gist(this.githubToken, gistId);\n    this.projectGist.read().then(this._initializeGraph);\n  }\n\n  @action newProject() {\n    this.projectGist = new Gist(this.githubToken);\n    const stateForSave = this._prepareStateForSave(INITIAL_GRAPH_DATA);\n    const stateJson = JSON.stringify(stateForSave, null, 2);\n    this.projectGist\n      .create('graphState.json', stateJson, false, 'new graph')\n      .then(this._initializeGraph);\n  }\n\n  // TODO: decompose initializeGraph on validate / migrate / initialize\n  _initializeGraph = gistInfo => {\n    let savedGraphStateJson = gistInfo.files[GRAPH_STATE_FILENAME].content;\n    const projectName = gistInfo.description;\n    let errorMsg;\n    let savedGraphState;\n    try {\n      savedGraphState = JSON.parse(savedGraphStateJson);\n      applyMigrations(savedGraphState);\n      if (!validateSavedState(savedGraphState)) {\n        errorMsg = `Project format \"${projectName ||\n          'Untitled'}\" has invalid data format`;\n      }\n    } catch (err) {\n      errorMsg = `Project \"${projectName ||\n        'Untitled'}\" failed to parse / migrate / validate`;\n    }\n\n    if (errorMsg) {\n      notie.alert({ type: 'error', text: errorMsg });\n      return;\n    }\n\n    this.graphData = new Graph(savedGraphState.graph);\n    this.forceStrength = savedGraphState.meta.forceStrength;\n    this.forceDistance = savedGraphState.meta.forceDistance;\n    this.isLoaded = true;\n  };\n\n  _prepareStateForSave = optionalGraphData => {\n    let graphData = optionalGraphData || this.graphData.getImmutableCopy();\n    return {\n      graph: graphData,\n      meta: {\n        forceStrength: this.forceStrength,\n        forceDistance: this.forceDistance,\n        version: appVersion\n      }\n    };\n  };\n\n  @action saveProject() {\n    let result = this._prepareStateForSave();\n    const resultJson = JSON.stringify(result, null, 2);\n    this.projectGist\n      .update(GRAPH_STATE_FILENAME, resultJson)\n      .then(responseObj => {\n        this.savedChangeStamp = this.changeStamp;\n      });\n  }\n\n  @observable _activeNode = null;\n  get activeNode() {\n    return this._activeNode;\n  }\n  set activeNode(v) {\n    if (this._activeNode) {\n      this.graphData.findNode(this._activeNode).__focused = false;\n    }\n    if (v) {\n      this.graphData.findNode(v).__focused = true;\n    }\n    this._activeNode = v;\n  }\n\n  @observable targetLinkChoiceInProgress = false;\n  @observable changeStamp = 0;\n  @observable savedChangeStamp = 0;\n\n  @observable forceStrength = GRAPH_FORCE_STRENGTH_DEFAULT;\n  @observable forceDistance = GRAPH_FORCE_DISTANCE_DEFAULT;\n\n  getAfterErrorSnapshot() {\n    return {\n      graphData: this.graphData.getImmutableCopy(),\n      forceStrength: this.forceStrength,\n      forceDistance: this.forceDistance,\n      targetLinkChoiceInProgress: this.targetLinkChoiceInProgress,\n      changeStamp: this.changeStamp,\n      savedChangeStamp: this.savedChangeStamp,\n      gistId: this.projectGist._gistId\n    };\n  }\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { inject, observer } from 'mobx-react';\nimport * as d3 from 'd3';\nimport './GraphView.css';\nimport debounce from './debounce';\n\n// Functions and variables\nvar FORCE;\nFORCE = (function(nsp) {\n  var width = window.innerWidth,\n    height = window.innerHeight,\n    // TODO: maybe need d3.forceX and d3.forceY instead of d3.forceCenter\n    initForce = (nodes, links, forceOptions) => {\n      const { strength, distance } = forceOptions;\n      nsp.force = d3\n        .forceSimulation(nodes)\n        .force('charge', d3.forceManyBody().strength(strength))\n        .force(\n          'link',\n          d3\n            .forceLink(links)\n            .id(d => d.__id)\n            .distance(distance)\n        )\n        .force(\n          'center',\n          d3\n            .forceCenter()\n            .x(nsp.width / 2)\n            .y(nsp.height / 2)\n        )\n        .force('collide', d3.forceCollide([5]).iterations([5]));\n    },\n    enterNode = selection => {\n      selection\n        .select('circle')\n        .attr('r', 25)\n        .style('fill', 'tomato')\n        .style('stroke', 'bisque')\n        .style('stroke-width', '3px');\n\n      selection\n        .select('text')\n        .style('fill', 'honeydew')\n        .style('font-weight', '600')\n        .style('text-transform', 'uppercase')\n        .style('text-anchor', 'middle')\n        .style('alignment-baseline', 'middle')\n        .style('font-size', '10px')\n        .style('font-family', 'cursive');\n    },\n    updateNode = selection => {\n      selection\n        .attr('transform', d => 'translate(' + d.x + ',' + d.y + ')')\n        .attr('cx', d => (d.x = Math.max(30, Math.min(width - 30, d.x))))\n        .attr('cy', d => (d.y = Math.max(30, Math.min(height - 30, d.y))));\n    },\n    enterLink = selection => {\n      selection.attr('stroke-width', 3).attr('stroke', 'bisque');\n    },\n    updateLink = selection => {\n      selection\n        .attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y);\n    },\n    updateGraph = selection => {\n      selection.selectAll('.node').call(updateNode);\n      selection.selectAll('.link').call(updateLink);\n    },\n    dragStarted = d => {\n      if (!d3.event.active) nsp.force.alphaTarget(0.3).restart();\n\n      d.fx = d.x;\n      d.fy = d.y;\n    },\n    dragging = d => {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    },\n    dragEnded = d => {\n      if (!d3.event.active) nsp.force.alphaTarget(0);\n\n      d.fx = null;\n      d.fy = null;\n    },\n    initDrag = () =>\n      d3.selectAll('g.node').call(\n        d3\n          .drag()\n          .on('start', dragStarted)\n          .on('drag', dragging)\n          .on('end', dragEnded)\n      ),\n    initTick = that => {\n      that.d3Graph = d3.select(ReactDOM.findDOMNode(that));\n      nsp.force.on('tick', () => {\n        that.d3Graph.call(updateGraph);\n      });\n    };\n\n  nsp.width = width;\n  nsp.height = height;\n  nsp.enterNode = enterNode;\n  nsp.updateNode = updateNode;\n  nsp.enterLink = enterLink;\n  nsp.updateLink = updateLink;\n  nsp.updateGraph = updateGraph;\n  nsp.initForce = initForce;\n  nsp.dragStarted = dragStarted;\n  nsp.dragging = dragging;\n  nsp.dragEnded = dragEnded;\n  nsp.initDrag = initDrag;\n  nsp.initTick = initTick;\n\n  return nsp;\n})(FORCE || {});\n\n@inject('projectStore')\n@observer\nclass GraphView extends Component {\n  componentDidMount() {\n    const {\n      projectStore: { graphData, forceStrength, forceDistance }\n    } = this.props;\n    this.reInitForce(graphData, {\n      strength: forceStrength,\n      distance: forceDistance\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const { graphData } = this.props.projectStore;\n    if (\n      prevProps.changeStamp !== this.props.changeStamp ||\n      prevProps.forceStrength !== this.props.forceStrength ||\n      prevProps.forceDistance !== this.props.forceDistance\n    ) {\n      this.reInitForceDebounced(graphData, {\n        strength: this.props.forceStrength,\n        distance: this.props.forceDistance\n      });\n    }\n  }\n\n  reInitForce = (graphData, forceOptions) => {\n    FORCE.initForce(\n      graphData.getNodeArray(),\n      graphData.getLinkArray(),\n      forceOptions\n    );\n    FORCE.initTick(this);\n    FORCE.initDrag();\n  };\n\n  reInitForceDebounced = debounce(this.reInitForce, 100);\n\n  render() {\n    // activeNode observe for highlightning active node\n    // eslint-disable-next-line no-unused-vars\n    const { graphData, activeNode } = this.props.projectStore;\n    let nodes = graphData.getNodeArray().map(node => {\n      return (\n        <Node\n          key={node.__id}\n          name={node.name}\n          data={node}\n          focused={node.__focused}\n        />\n      );\n    });\n    let links = graphData.getLinkArray().map(link => {\n      return <Link key={link.__id} data={link} />;\n    });\n    return (\n      <div className=\"graph_container\">\n        <svg className=\"graph\" width={FORCE.width} height={FORCE.height}>\n          <defs>\n            <marker\n              id=\"arrow\"\n              viewBox=\"0 0 10 10\"\n              refX=\"26\"\n              refY=\"5\"\n              markerWidth=\"5\"\n              markerHeight=\"5\"\n              orient=\"auto-start-reverse\"\n              markerUnits=\"strokeWidth\"\n            >\n              <path d=\"M 0 0 L 10 5 L 0 10 z\" />\n            </marker>\n          </defs>\n          <g>{links}</g>\n          <g>{nodes}</g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nclass Link extends Component {\n  componentDidMount() {\n    this.d3Link = d3\n      .select(ReactDOM.findDOMNode(this))\n      .datum(this.props.data)\n      .call(FORCE.enterLink);\n  }\n\n  componentDidUpdate() {\n    this.d3Link.datum(this.props.data).call(FORCE.updateLink);\n  }\n\n  render() {\n    return <line className=\"link\" markerEnd=\"url('#arrow')\" />;\n  }\n}\n\n@inject('projectStore')\n@observer\nclass Node extends Component {\n  componentDidMount() {\n    this.d3Node = d3\n      .select(ReactDOM.findDOMNode(this))\n      .datum(this.props.data)\n      .call(FORCE.enterNode)\n      .call(this.processFocus, this.props.focused);\n  }\n\n  componentDidUpdate() {\n    this.d3Node\n      .datum(this.props.data)\n      .call(FORCE.updateNode)\n      .call(this.processFocus, this.props.focused);\n  }\n\n  processFocus = (d3NodeSelection, isFocused) => {\n    d3NodeSelection.select('circle').classed('focused', isFocused);\n  };\n\n  render() {\n    const nodeId = this.props.data.__id;\n    return (\n      <g className=\"node\" onClick={this.handleClick} data-node-id={nodeId}>\n        <circle />\n        <text>{this.props.data.name}</text>\n      </g>\n    );\n  }\n\n  handleClick = e => {\n    const { projectStore } = this.props;\n    if (!projectStore.targetLinkChoiceInProgress) {\n      projectStore.activeNode = Number(e.currentTarget.dataset.nodeId);\n      return;\n    }\n\n    // handle new link creation\n    const sourceNodeId = projectStore.activeNode;\n    const targetNodeId = Number(e.currentTarget.dataset.nodeId);\n    try {\n      projectStore.graphData.addLink(sourceNodeId, targetNodeId, 'CHILD');\n    } catch (e) {\n      console.warn(e.message); // TODO: warn with alertify\n      return;\n    }\n    projectStore.targetLinkChoiceInProgress = false;\n    projectStore.changeStamp++;\n  };\n}\n\nexport default GraphView;\n","export default function debounce(fn, delay) {\n  let timerId;\n  return function() {\n    let context = this;\n    let args = arguments;\n    if (timerId) {\n      clearTimeout(timerId);\n    }\n    timerId = setTimeout(() => {\n      fn.apply(context, args);\n      timerId = null;\n    }, delay);\n  };\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { styled } from '@material-ui/core/styles';\n\nconst StyledButton = styled(Button)({\n  margin: '2px'\n});\n\nconst CustomButton = ({\n  size = 'small',\n  variant = 'contained',\n  children,\n  ...rest\n}) => {\n  return (\n    <StyledButton size={size} variant={variant} {...rest}>\n      {children}\n    </StyledButton>\n  );\n};\n\nexport default CustomButton;\n","import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport './GraphEditPanel.css';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Button from './Button';\n\n@inject('projectStore')\n@observer\nclass GraphEditPanel extends Component {\n  state = { activeNode: null, linksHided: false };\n\n  static getDerivedStateFromProps(props, prevState) {\n    const { projectStore } = props;\n    const { activeNode } = projectStore;\n    if (activeNode === prevState.activeNode) return prevState;\n    let node = null;\n    let linksHided = false;\n    if (activeNode) {\n      node = projectStore.graphData.findNode(activeNode);\n      // TODO: extern to configuration\n      linksHided = Object.keys(node.__links).length > 5;\n    }\n    return { activeNode, linksHided };\n  }\n\n  render() {\n    const { projectStore } = this.props;\n    // changeStamp here for observe\n    // eslint-disable-next-line no-unused-vars\n    const { activeNode, changeStamp } = projectStore;\n    let content;\n    if (!activeNode) {\n      content = (\n        <>\n          Click on node to edit\n          <br />\n          or\n          <br />\n          <Button onClick={this.createNewNode}>create new node</Button>\n        </>\n      );\n    } else {\n      const node = projectStore.graphData.findNode(activeNode);\n      content = (\n        <>\n          {this.renderActiveNodeInfo(node)}\n          <br />\n          {this.renderLinks(node)}\n          {this.renderDeleteNodeButton(node)}\n          {this.renderNewLinkComponent(node)}\n          {this.renderNewChildButton(node)}\n        </>\n      );\n    }\n    return (\n      <div key=\"graphEditPanel\" className=\"graphEditPanel\">\n        {content}\n      </div>\n    );\n  }\n\n  renderActiveNodeInfo = node => {\n    const descriptionContent = node.description ? node.description : '';\n    return (\n      <>\n        <TextField\n          label=\"Node Name\"\n          fullWidth\n          multiline\n          variant=\"outlined\"\n          margin=\"normal\"\n          value={node.name}\n          onChange={e => this.handleChangeNodeName(e, node)}\n        />\n        <br />\n        <TextField\n          label=\"Description\"\n          fullWidth\n          multiline\n          variant=\"outlined\"\n          margin=\"normal\"\n          value={descriptionContent}\n          onChange={e => this.handleChangeDescription(e, node)}\n        />\n        <br />\n        {'Node ID: '}\n        {node.__id}\n        <br />\n      </>\n    );\n  };\n\n  handleChangeNodeName = (e, targetNode) => {\n    targetNode.name = e.target.value;\n    this.props.projectStore.changeStamp++;\n  };\n\n  handleChangeDescription = (e, targetNode) => {\n    targetNode.description = e.target.value;\n    this.props.projectStore.changeStamp++;\n  };\n\n  renderLinks = node => {\n    const {\n      projectStore: { graphData }\n    } = this.props;\n    if (this.state.linksHided) {\n      return <Button onClick={this.showLinks}>Show links ...</Button>;\n    }\n    let items = [];\n    for (let linkId in node.__links) {\n      const link = node.__links[linkId];\n      const sourceNode = graphData.findNode(link.sourceId);\n      const targetNode = graphData.findNode(link.targetId);\n      // TODO: draw arrow instead of source / target text\n      items.push(\n        <ListItem key={`item-${linkId}`} button>\n          <ListItemText>\n            <b>source: </b>\n            {sourceNode.__id}: {sourceNode.name}, <b>target: </b>\n            {targetNode.__id}: {targetNode.name}\n          </ListItemText>\n          <ListItemSecondaryAction>\n            <IconButton onClick={() => this.handleDeleteLink(link)}>\n              <DeleteIcon fontSize=\"small\" />\n            </IconButton>\n          </ListItemSecondaryAction>\n        </ListItem>\n      );\n    }\n\n    return (\n      <>\n        <span>Links:</span>\n        <List className=\"links-list\" subheader={<li />} dense>\n          {items}\n        </List>\n      </>\n    );\n  };\n\n  showLinks = () => {\n    this.setState({ linksHided: false });\n  };\n\n  renderDeleteNodeButton = node => {\n    if (Object.keys(node.__links).length > 0) return null;\n\n    return (\n      <Button onClick={() => this.handleDeleteNode(node)}>\n        Delete this node\n      </Button>\n    );\n  };\n\n  renderNewLinkComponent = () => {\n    const { projectStore } = this.props;\n    if (!projectStore.targetLinkChoiceInProgress) {\n      return (\n        <div>\n          <Button onClick={this.handleNewLinkTargetSelection}>\n            add new link...\n          </Button>\n          <br />\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        {'Click on target node to create new link ... '}\n        <Button\n          onClick={this.handleAbortNewLinkCreation}\n          variant=\"outlined\"\n          color=\"secondary\"\n        >\n          cancel\n        </Button>\n      </div>\n    );\n  };\n\n  handleAbortNewLinkCreation = () => {\n    const { projectStore } = this.props;\n    projectStore.targetLinkChoiceInProgress = false;\n  };\n\n  renderNewChildButton = node => {\n    return (\n      <div key=\"newChild\">\n        <Button onClick={() => this.handleNewChildCreation(node.__id)}>\n          add new child...\n        </Button>\n        <br />\n      </div>\n    );\n  };\n\n  handleDeleteNode = node => {\n    const { projectStore } = this.props;\n    projectStore.activeNode = null;\n    projectStore.graphData.deleteNode(node);\n    projectStore.changeStamp++;\n  };\n\n  handleDeleteLink = link => {\n    const { projectStore } = this.props;\n    projectStore.graphData.deleteLink(link);\n    projectStore.changeStamp++;\n  };\n\n  createNewNode = () => {\n    const { projectStore } = this.props;\n    const { graphData } = projectStore;\n    const newNode = graphData.addNode('new node');\n    projectStore.activeNode = newNode.__id;\n    projectStore.changeStamp++;\n  };\n\n  handleNewChildCreation = currentNodeId => {\n    const { projectStore } = this.props;\n    const { graphData } = projectStore;\n    const newNode = graphData.addNode('new child node');\n    graphData.addLink(newNode.__id, currentNodeId, 'CHILD');\n    projectStore.activeNode = newNode.__id;\n    projectStore.changeStamp++;\n  };\n\n  handleNewLinkTargetSelection = () => {\n    const { projectStore } = this.props;\n    projectStore.targetLinkChoiceInProgress = true;\n  };\n}\n\nexport { GraphEditPanel };\n","import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport './SaveInterface.css';\nimport Button from './Button';\n\n@inject('projectStore')\n@observer\nclass SaveInterface extends Component {\n  handleLeavePage = event => {\n    const { changeStamp, savedChangeStamp } = this.props.projectStore;\n    if (process.env.NODE_ENV === 'development') return;\n    if (changeStamp === savedChangeStamp) return;\n\n    // for browsers, that not support standard alert-on-exit message\n    const warningText =\n      'Data not saved, sure you want to leave the application?';\n    event.returnValue = warningText;\n    return warningText;\n  };\n\n  componentDidMount = () => {\n    window.addEventListener('beforeunload', this.handleLeavePage);\n  };\n\n  componentWillUnmount = () => {\n    window.removeEventListener('beforeunload', this.handleLeavePage);\n  };\n\n  render() {\n    const { changeStamp, savedChangeStamp } = this.props.projectStore;\n    let content;\n    if (changeStamp > savedChangeStamp) {\n      content = (\n        <>\n          <span className=\"redPoint\">Has unsaved changes</span>\n          <Button onClick={this.handleSave}>Save</Button>\n        </>\n      );\n    } else {\n      content = <span className=\"greenPoint\">Graph saved</span>;\n    }\n\n    return <div className=\"saveInterface\">{content}</div>;\n  }\n\n  handleSave = () => {\n    this.props.projectStore.saveProject();\n  };\n}\n\nexport default SaveInterface;\n","import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport notie from 'notie';\nimport request from './request';\nimport { API_URL, GRAPH_STATE_FILENAME } from './gist/constants';\nimport './GistSelection.css';\n\nconst LOCAL_STORAGE_KEY = 'GITHUB_TOKEN';\n\n// cached\nfunction requestToken(cb) {\n  const githubToken = localStorage.getItem(LOCAL_STORAGE_KEY);\n  if (githubToken) {\n    return cb(null, githubToken);\n  }\n\n  notieInput('token with gist access', (err, githubToken) => {\n    if (err) return cb(err);\n\n    localStorage.setItem(LOCAL_STORAGE_KEY, githubToken);\n    return cb(null, githubToken);\n  });\n}\n\nfunction notieInput(fieldName, cb) {\n  notie.input(\n    {\n      text: `Specify github ${fieldName}`\n    },\n    inputResult => {\n      return cb(null, inputResult);\n    },\n    () => {\n      const errMsg = `Need Specify github ${fieldName} to continue =(`;\n      notie.error({\n        text: errMsg\n      });\n      return cb(new Error(errMsg));\n    }\n  );\n}\n\nasync function getSuitableGists(githubToken) {\n  let userGists = await getAllUserGists(githubToken);\n  return userGists.filter(gist => !!gist.files[GRAPH_STATE_FILENAME]);\n}\n\nasync function getAllUserGists(githubToken) {\n  let response = await request(\n    'GET',\n    `${API_URL}gists`,\n    { Authorization: `token ${githubToken}` },\n    null\n  );\n  let userGists;\n  try {\n    userGists = JSON.parse(response);\n  } catch (e) {\n    console.error(`Retrieved json from gist storage failed to parse`);\n    throw e;\n  }\n\n  if (!userGists) throw new Error('Data from response not available');\n\n  return userGists;\n}\n\n@inject('projectStore')\n@observer\nclass GistSelection extends Component {\n  componentDidMount() {\n    const { projectStore } = this.props;\n    requestToken((err, githubToken) => {\n      if (err) throw err;\n\n      projectStore.githubToken = githubToken;\n      getSuitableGists(githubToken).then(gists => {\n        projectStore.gists = gists;\n      });\n    });\n  }\n\n  render() {\n    const { gists } = this.props.projectStore;\n    if (!gists) {\n      return 'gists loading...';\n    }\n\n    let gistElems = gists.map(gist => (\n      <span\n        key={gist.id}\n        className=\"gistDescription yellow\"\n        onClick={() => this.handleSelect(gist.id)}\n      >\n        {gist.description}\n      </span>\n    ));\n    gistElems.push(\n      <span\n        key=\"new\"\n        className=\"gistDescription blue\"\n        onClick={this.handleNewGist}\n      >\n        create new\n      </span>\n    );\n\n    return (\n      <div className=\"gistSelection\">\n        <span>Choose gist with graph:</span>\n        {gistElems}\n      </div>\n    );\n  }\n\n  handleSelect = gistId => {\n    this.props.projectStore.loadProject(gistId);\n  };\n\n  handleNewGist = () => {\n    this.props.projectStore.newProject();\n  };\n}\n\nexport { GistSelection };\n","import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\n// import Slider from '@material-ui/lab/esm/Slider';\nimport Slider from '@material-ui/core/Slider';\nimport './SettingsPanel.css';\nimport {\n  GRAPH_FORCE_STRENGTH_MIN,\n  GRAPH_FORCE_STRENGTH_MAX,\n  GRAPH_FORCE_DISTANCE_MIN,\n  GRAPH_FORCE_DISTANCE_MAX\n} from './config';\n\n@inject('projectStore')\n@observer\nclass SettingsPanel extends Component {\n  render() {\n    const { projectStore } = this.props;\n    return (\n      <div className=\"settingsPanel\">\n        Strength:\n        <Slider\n          defaultValue={projectStore.forceStrength}\n          value={projectStore.forceStrength}\n          min={GRAPH_FORCE_STRENGTH_MIN}\n          max={GRAPH_FORCE_STRENGTH_MAX}\n          onChange={(c, value) => {\n            projectStore.forceStrength = value;\n            projectStore.changeStamp++;\n          }}\n        />\n        Distance:\n        <Slider\n          defaultValue={projectStore.forceDistance}\n          value={projectStore.forceDistance}\n          min={GRAPH_FORCE_DISTANCE_MIN}\n          max={GRAPH_FORCE_DISTANCE_MAX}\n          onChange={(c, value) => {\n            projectStore.forceDistance = value;\n            projectStore.changeStamp++;\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport { SettingsPanel };\n","import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport './App.css';\nimport GraphView from './GraphView';\nimport { GraphEditPanel } from './GraphEditPanel';\nimport SaveInterface from './SaveInterface';\nimport { GistSelection } from './gistSelection';\nimport { SettingsPanel } from './SettingsPanel';\nimport { version } from '../package.json';\n\nfunction AppVesion(props: any) {\n  return <div className=\"app-version\">Version: {props.version}</div>;\n}\n\n@inject('projectStore')\n@observer\nclass App extends Component {\n  render() {\n    const {\n      graphData, changeStamp, forceStrength, forceDistance, isLoaded\n    } = (this.props as any).projectStore;\n    let content;\n    if (!graphData) {\n      content = (\n        <>\n          <GistSelection />\n          <AppVesion version={version} />\n        </>\n      );\n    } else {\n      content = (\n        <>\n          <GraphView\n            changeStamp={changeStamp}\n            forceStrength={forceStrength}\n            forceDistance={forceDistance}\n          />\n          <GraphEditPanel />\n          <SaveInterface />\n          <SettingsPanel />\n          <AppVesion version={version}/>\n        </>\n      );\n    }\n\n    return (\n      <div className=\"App\">\n        {content}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'mobx-react';\nimport { init as initSentry } from '@sentry/browser';\nimport { version } from '../package.json';\nimport { ProjectStore } from './ProjectStore';\nimport './index.css';\nimport '@material-ui/core';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nif (process.env.NODE_ENV !== 'development') {\n  initSentry({\n    beforeSend: function (event) {\n      // TODO: message ok for sending state ?\n      event.message = JSON.stringify(projectStore.getAfterErrorSnapshot());\n      return event;\n    },\n    release: version,\n    dsn: 'https://504d6ec417994bf7b7f559ffcdc5afab@sentry.io/1527022'\n  });\n}\n\nconst projectStore = new ProjectStore();\nconst stores = {\n  projectStore,\n};\n\n// For easier debugging\nif (process.env.NODE_ENV !== 'production') {\n  (window as any)._____APP_STATE_____ = stores;\n}\n\nReactDOM.render(\n  <Provider { ...stores }>\n    <App />\n  </Provider>,\n  document.querySelector('#root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}